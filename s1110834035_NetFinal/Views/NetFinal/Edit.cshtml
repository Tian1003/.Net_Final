@model s1110834035_NetFinal.Models.Photos
@{
    ViewData["Title"] = "EditPhoto";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>新增產品</h2>

@* 建立新增資料所須的表單*@
@using (Html.BeginForm("Edit", "NetFinal", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div class="form-horizontal">
        <div class="row">
            <div class="col-md-8">
                <div class="input-group mb-3">
                </div>
                <input type="hidden" asp-for="Id" />
                <div class="input-group mb-3">
                </div>
                <div class="input-group mb-3">
                </div>
                <div class="input-group mb-3">
                </div>
            </div>
            <div class="col-md-4">
            </div>
        </div>
        <div class="input-group mb-3">
        </div>
    </div>
    <div class="input-group mb-3">
        <span for="AlbumId" class="input-group-text" id="inputGroup-sizing-default">
            類&emsp;&emsp;別
        </span>

        <select id="AlbumId" name="AlbumId" class="form-control">
            @foreach (var item in ViewBag.PhotoList) //從ViewBag取得類別資料, 產生選單
            {
                if (ViewBag.cid == item.Id)
                {
                    <option value="@item.Id" selected="selected">@item.AlbumName</option>
                }
                else
                {
                    <option value="@item.Id">@item.AlbumName</option>
                }
            }
        </select>

    </div>

    <input type="hidden" asp-for="Id" />
    <input type="hidden" asp-for="FilePath" />
    <div class="input-group mb-3">
        <span for="PhotoName" class="input-group-text" id="inputGroup-sizing-default">
            產品名稱
        </span>
        <input type="text" asp-for="PhotoName" class="form-control" aria-label="Sizing example input" ariadescribedby="inputGroup-sizing-default">
    </div>

    <div class="input-group mb-3">
        <span for="Description" class="input-group-text" id="inputGroup-sizing-default">
            說&emsp;&emsp;明
        </span>
        <input type="text" asp-for="Description" class="form-control" aria-label="Sizing example input" ariadescribedby="inputGroup-sizing-default">
    </div>

    <div class="col-md-4">
        <div class="input-group mb-3">
            <input type="file" asp-for="FilePath" name="FilePath" id="FilePath"
                   class="form-control-file" aria-label="Sizing example input"
                   aria-describedby="inputGroup-sizing-default"
                   onchange="PreviewImage();" />
        </div>
        @if (Model.FilePath != "")
        {
            <img id="preview" src='@Url.Content("~/images/"+Model.FilePath)' class="d-block w-100" alt="..."
                 onerror="imgUserAvatarError(this)">
            <p>@Model.FilePath</p>
        }
        else
        {
            <img id="preview" src='@Url.Content("~/images/nothing.png")' class="d-block w-100" alt="..."
                 onerror="imgUserAvatarError(this)">
        }
    </div>
    <div class="input-group mb-3">
        <div class="col-sm-offset-2 col-sm-10">
            <a href="@Url.Action("PhotoGraph", new { cid = @ViewBag.cid })"
               class="btn btn-info btn-lg">回到列表</a>
            <input type="submit" class="btn btn-primary btn-lg" value=" 更新產品" />
        </div>
    </div>
}
